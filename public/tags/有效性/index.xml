<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>有效性 on R-Finance中国</title><link>https://rfinance.org.cn/tags/%E6%9C%89%E6%95%88%E6%80%A7/</link><description>Recent content in 有效性 on R-Finance中国</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Tue, 10 Jun 2025 15:36:25 +0000</lastBuildDate><atom:link href="https://rfinance.org.cn/tags/%E6%9C%89%E6%95%88%E6%80%A7/index.xml" rel="self" type="application/rss+xml"/><item><title>MACD指标择时交易策略分析</title><link>https://rfinance.org.cn/post/macd/</link><pubDate>Tue, 10 Jun 2025 15:36:25 +0000</pubDate><guid>https://rfinance.org.cn/post/macd/</guid><description>&lt;h1 id="引言">引言&lt;/h1>
&lt;p>技术分析是金融市场中常用的分析方法，其中MACD指标是一种重要的趋势跟踪指标，能够反
映价格波动的趋势和动量。本研究旨在通过R语言实现基于MACD指标的股票择时交易策略，并
通过历史数据回测寻找最佳参数组合。&lt;/p>
&lt;h1 id="研究方法">研究方法&lt;/h1>
&lt;h2 id="数据获取与处理">数据获取与处理&lt;/h2>
&lt;p>我们将使用&lt;code>quantmod&lt;/code>包获取股票数据，并使用&lt;code>quantstrat&lt;/code>包进行策略回测。首先加载所需的包：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 加载必要的包&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(quantmod)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(quantstrat)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(eTTR)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(PerformanceAnalytics)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(ggplot2)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(dplyr)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(tibble)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(scales)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(gridExtra)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(showtext)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">font_add&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;SimHei&amp;#34;&lt;/span>, regular &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;SimHei.ttf&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">showtext_auto&lt;/span>()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来，我们获取TSLA的历史数据作为研究对象：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 设置获取数据的起始和结束日期&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>startdate.st &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">as.Date&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;2018-01-01&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>enddate.st &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">as.Date&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;2023-06-01&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 获取上证指数数据&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">getSymbols&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;TSLA&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> src &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;yahoo&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from &lt;span style="color:#f92672">=&lt;/span> startdate.st, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to &lt;span style="color:#f92672">=&lt;/span> enddate.st)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>## [1] &amp;#34;TSLA&amp;#34;
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">colnames&lt;/span>(TSLA) &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Open&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;High&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Low&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Close&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Volume&amp;#34;&lt;/span>, 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Adjusted&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 查看数据结构&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">head&lt;/span>(TSLA)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>## Open High Low Close Volume Adjusted
## 2018-01-02 20.80000 21.47400 20.73333 21.36867 65283000 21.36867
## 2018-01-03 21.40000 21.68333 21.03667 21.15000 67822500 21.15000
## 2018-01-04 20.85800 21.23667 20.37867 20.97467 149194500 20.97467
## 2018-01-05 21.10800 21.14933 20.80000 21.10533 68868000 21.10533
## 2018-01-08 21.06667 22.46800 21.03333 22.42733 147891000 22.42733
## 2018-01-09 22.34400 22.58667 21.82667 22.24600 107199000 22.24600
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">summary&lt;/span>(TSLA)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>## Index Open High Low 
## Min. :2018-01-02 Min. : 12.07 Min. : 12.45 Min. : 11.80 
## 1st Qu.:2019-05-10 1st Qu.: 21.42 1st Qu.: 21.82 1st Qu.: 21.04 
## Median :2020-09-15 Median :126.48 Median :130.84 Median :122.50 
## Mean :2020-09-14 Mean :135.13 Mean :138.26 Mean :131.71 
## 3rd Qu.:2022-01-20 3rd Qu.:230.08 3rd Qu.:235.64 3rd Qu.:224.40 
## Max. :2023-05-31 Max. :411.47 Max. :414.50 Max. :405.67 
## Close Volume Adjusted 
## Min. : 11.93 Min. : 29401800 Min. : 11.93 
## 1st Qu.: 21.50 1st Qu.: 77479900 1st Qu.: 21.50 
## Median :125.58 Median :105881850 Median :125.58 
## Mean :135.07 Mean :134180816 Mean :135.07 
## 3rd Qu.:231.07 3rd Qu.:159549600 3rd Qu.:231.07 
## Max. :409.97 Max. :914082000 Max. :409.97
&lt;/code>&lt;/pre>&lt;h2 id="macd指标计算原理">MACD指标计算原理&lt;/h2>
&lt;p>MACD指标由三条曲线组成：DIF线、DEA线和MACD柱状图。其计算基于以下步骤：&lt;/p></description></item><item><title>均值回归策略有效性分析</title><link>https://rfinance.org.cn/docs/mean-reverse/</link><pubDate>Tue, 10 Jun 2025 15:36:25 +0000</pubDate><guid>https://rfinance.org.cn/docs/mean-reverse/</guid><description>&lt;h1 id="引言">引言&lt;/h1>
&lt;p>均值回归是金融市场中的一种重要现象，指资产价格或收益率在长期内趋向于回归其历史平
均值。基于这一理论的交易策略通常假设价格偏离其均值后会回归，因此可以通过买入低价
资产、卖出高价资产来获利。&lt;/p>
&lt;p>本文将通过R语言实现均值回归策略，并验证其有效性。我们将选取多只股票作为样本，优化
策略参数，并在样本外数据上验证策略的表现。&lt;/p>
&lt;h1 id="数据准备与分析">数据准备与分析&lt;/h1>
&lt;p>首先加载必要的R包并获取股票数据。我们将选取几只具有代表性的美国科技股作为研究对象。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 加载必要的R包&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(quantmod)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(PerformanceAnalytics)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(foreach)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(doParallel)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(ggplot2)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(dplyr)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(tidyr)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(eTTR)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(zoo)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来，我们获取多只股票的历史数据。这里选择了苹果(AAPL)、微软(MSFT)、谷歌(GOOG)、
亚马逊(AMZN)和特斯拉(TSLA)作为样本。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 设置起止日期&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>start_date &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#e6db74">&amp;#34;2018-01-01&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>end_date &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#e6db74">&amp;#34;2023-01-01&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>out_of_sample_date &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#e6db74">&amp;#34;2023-01-02&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>end_oos_date &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#e6db74">&amp;#34;2023-12-31&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 股票代码列表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>stock_symbols &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;AAPL&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;MSFT&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;GOOG&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;AMZN&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;TSLA&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 获取股票数据&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>stock_data &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">list&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> (symbol &lt;span style="color:#66d9ef">in&lt;/span> stock_symbols) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data_raw &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">getSymbols&lt;/span>(symbol, from &lt;span style="color:#f92672">=&lt;/span> start_date, to &lt;span style="color:#f92672">=&lt;/span> end_date, auto.assign &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">FALSE&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">colnames&lt;/span>(data_raw) &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Open&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;High&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Low&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Close&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Volume&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Adjusted&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stock_data[[symbol]] &lt;span style="color:#f92672">&amp;lt;-&lt;/span> data_raw
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 获取样本外数据&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>oos_data &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">list&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> (symbol &lt;span style="color:#66d9ef">in&lt;/span> stock_symbols) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data_raw &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">getSymbols&lt;/span>(symbol, from &lt;span style="color:#f92672">=&lt;/span> out_of_sample_date, to &lt;span style="color:#f92672">=&lt;/span> end_oos_date, auto.assign &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">FALSE&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">colnames&lt;/span>(data_raw) &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">c&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Open&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;High&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Low&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Close&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Volume&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Adjusted&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> oos_data[[symbol]] &lt;span style="color:#f92672">&amp;lt;-&lt;/span> data_raw
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>让我们可视化这些股票的价格走势，以便对数据有一个直观的了解。&lt;/p></description></item></channel></rss>